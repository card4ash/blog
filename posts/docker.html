
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>ashcoder.io - Docker for Windows</title>
        <meta name="description" content="Welcome!" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="ashcoder.io" href="/blog/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="ashcoder.io" href="/blog/feed.atom" />
        <link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">

        <link href="/blog/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/blog/assets/css/highlight.css" rel="stylesheet">
        <link href="/blog/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/blog/assets/css/master.css" rel="stylesheet" />
        <link href="/blog/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/blog/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="ashcoder.io" />
        <meta name="msapplication-tooltip" content="ashcoder.io" />
        <meta name="msapplication-starturl" content="/blog/" />

        <meta property="og:title" content="ashcoder.io - Docker for Windows" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://host.com/blog/posts/docker" />
        <!-- TODO: More social graph meta tags -->

        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/blog/">ashcoder.io</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/blog/posts">Archive</a></li>
        <li><a href="/blog/tags">Tags</a></li>
        <li><a href="/blog/about">About Me</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Docker for Windows</h1>
    <div class="meta">        
Published on Friday, September 4, 2020<br>    </div>
        <div class="tags">
                    <a role="button" href="/blog/tags/docker" class="btn btn-default btn-xs">docker</a>
                    <a role="button" href="/blog/tags/windows" class="btn btn-default btn-xs">windows</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="docker-basic-command">Docker Basic Command</h1>
<p>All the process for docker</p>
<pre><code>    docker ps
</code></pre>
<pre><code>    docker ps -a
</code></pre>
<p>Pulling an image from docker-hub if not available locally and install it</p>
<pre><code>    docker run hello-world
</code></pre>
<pre><code>    docker image ls
</code></pre>
<p>Docker run in port 80 and mapping it to host port 80
hostport:containerport</p>
<pre><code>    docker run -p 80:80 nginx
</code></pre>
<p>Stop the software</p>
<pre><code>    docker stop parts_of_container_id_which_is_unique
</code></pre>
<pre><code>    docker stop ee3
</code></pre>
<pre><code>    docker ps -a
</code></pre>
<pre><code>    docker start container_name/part_of_container_id
</code></pre>
<p>Uninstalling/Removing software/docker container</p>
<pre><code>    docker rm ee3
</code></pre>
<pre><code>    docker rm ee3 b9 etc_rasa
</code></pre>
<p>Removing images</p>
<pre><code>    docker rmi nginx
</code></pre>
<p>Docker command help</p>
<pre><code>    docker help search
</code></pre>
<p>Search from command line</p>
<pre><code>    docker search docs
</code></pre>
<p>Run docker documents locally</p>
<pre><code>    docker run -p 4000:4000 docs/docker.github.io
</code></pre>
<p>Run docker server with interactive command line with name</p>
<pre><code>    docker run -p 4000:4000 -it --name docs docs/docker.github.io
</code></pre>
<p>Running server in background in detached mode</p>
<pre><code>    docker run -p 81:80 --name iis -d microsoft/iis:nanoserver
</code></pre>
<p>So see the details about runnig image</p>
<pre><code>    docker inspect iis
</code></pre>
<p>Docker IP Address</p>
<pre><code class="language-shell">    docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id
</code></pre>
<p>Get the process associated with dockeer in powershell</p>
<pre><code>    get-process *docker*
</code></pre>
<h1 id="installing-docker-engine-on-windows-server-2016">Installing Docker Engine on Windows Server 2016</h1>
<p><a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/quick-start/set-up-environment?tabs=Windows-Server">Set up Environment</a></p>
<pre><code>    Install-Module -Name DockerMsftProvider -Repository PSGallery -Force
</code></pre>
<pre><code>    Install-Package -Name docker -ProviderName DockerMsftProvider
    Restart-Computer -Force
</code></pre>
<pre><code>    docker run microsoft/dotnet:nanoserver
</code></pre>
<pre><code>    docker run -it microsoft/dotnet:nanoserver dotnet --version
</code></pre>
<h1 id="running-command-line-apps-in-containers">Running Command Line Apps in Containers</h1>
<pre><code class="language-shell">    docker save nanoserver/iis -o iis.tar
</code></pre>
<p><strong>Using linux container to extract tar</strong></p>
<pre><code class="language-shell">    docker run -it alpine
</code></pre>
<p>Mounting c:\Users to container /data folder and show all files and folder inside container /data folder</p>
<pre><code class="language-shell">    docker run --rm -v c:/Users:/data alpine ls /data
    docker run --rm -v c:/Users/ashraful.alam/iistartest:/data alpine ls /data 
</code></pre>
<pre><code class="language-shell">    docker run --rm -it -v c:/Users/ashraful.alam/iistartest:/data alpine sh
    bash:\# tar -tf /data/iis.tar
    # mkdir /data/extract
    # tar -xf /data/iis.tar -C /data/extract
    # cd /data/extract/ 
    # ls
    # cat manifest.json
    # jq
    # apk add --no-cache jq
    # cat manifest.json | jq
</code></pre>
<pre><code class="language-shell">    docker run --rm -it -v c:/Users/ashraful.alam/iistartest:/data alpine tar -xf /data/extract/e7306db32ff89edf4f4b1da671bb3923cdd116eb90df9882a78f5dbe3e92f019/layer.tar -C /data/extract/e7306db32ff89edf4f4b1da671bb3923cdd116eb90df9882a78f5dbe3e92f019/layer
</code></pre>
<pre><code class="language-shell">    docker run --rm -it -v c:/Users/ashraful.alam/iistartest:/data alpine sh 
    # ls
    # cd data
    # cd extract
    # cd 7a27115c84f3a27e5658c2af681b313ddec35152658fc89270380c0495d0434b
    # mkdir layer
    # tar -xf layer.tar -C layer  
</code></pre>
<pre><code class="language-shell">    docker run --rm -it -v c:/Users/ashraful.alam/iistartest:/data ubuntu sh
</code></pre>
<p>Nmap port scanning</p>
<pre><code class="language-shell">    docker run --rm `
    weshigbee/nmap -v 192.168.0.0/24
</code></pre>
<p>ffmpeg converting mp4 to gif</p>
<pre><code class="language-shell">    docker run --rm `
    --volume ${pwd}:/output `
    jrottenberg/ffmpeg -i http://www.weshigbee.com/wp-content/uploads/2014/12/Turkey-Short.mp4 /output/Turkey.gif
</code></pre>
<h1 id="building-images-to-host-web-sites">Building Images to Host Web Sites</h1>
<pre><code class="language-shell">    docker run --rm -it -p 8080:80 nginx
    docker run --rm -it -p 8080:80 -v C:\Users\ashraful.alam\solitaire\app:/usr/share/nginx/html nginx


    docker run -d -p 8080:80 --name ngi nginx
    docker cp .\app\. ngi:/usr/share/nginx/html 
    docker exec -it ngi bash
    cd /usr/share/nginx/html

    docker exec nginx ls /usr/share/nginx/html 
</code></pre>
<p><strong>Create Image</strong></p>
<pre><code class="language-shell">    docker commit ngi solitaire:nginx
    docker run -d -p 8090:80 solitaire:nginx
    docker exec 4f9e1 ls /usr/share/nginx/html
</code></pre>
<p><strong>Image layer</strong></p>
<pre><code class="language-shell">    docker history nginx
</code></pre>
<p><strong>Docker File</strong></p>
<pre><code class="language-shell">    From nginx
    COPY app /usr/share/nginx/html
</code></pre>
<pre><code class="language-shell">mv  .\Dockerfile.txt .\Dockerfile
</code></pre>
<pre><code class="language-shell">    docker build -f Dockerfile -t solitaire:nginx-df .
    or
    docker build -t solitaire:nginx-df .
</code></pre>
<pre><code class="language-shell">    docker images | sls nginx
</code></pre>
<p><strong>Publishing to Docker HUb</strong></p>
<pre><code class="language-shell">    docker tag solitaire:nginx-df ashcoder/solitaire:nginx
    docker push  ashcoder/solitaire:nginx
</code></pre>
<h1 id="running-database-in-container">Running Database in Container</h1>
<p>MS SQL Server on linux Docker</p>
<pre><code class="language-shell">    docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;SA_PASSWORD=sqladmin&#64;123&quot; -p 1450:1433 -d mcr.microsoft.com/mssql/server
     docker logs container_id_partial
</code></pre>
<pre><code class="language-shell">    docker run --name some-mysql -p 3305:3306 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql
    docker exec -it some-mysql mysql --user=root --password=my-secret-pw 
</code></pre>
<h1 id="clean-up">Clean Up</h1>
<p>stop all container</p>
<pre><code class="language-shell">    docker stop $(docker ps -q)
</code></pre>
<p>remove all stoped container</p>
<pre><code class="language-shell">    docker container prune
</code></pre>
<p>remove all container</p>
<pre><code class="language-shell">docker rm -f $(docker ps -aq)
</code></pre>
<p>Remove unused volumes</p>
<pre><code class="language-shell">    docker volume prune
</code></pre>
<p>remove all volume</p>
<pre><code class="language-shell">docker volume rm $(docker volume ls -q)
</code></pre>
<p>remove container with volume</p>
<pre><code class="language-shell">docker rm -fv container_id
</code></pre>
<h1 id="docker-compose">Docker Compose</h1>
<pre><code class="language-shell">    docker run --name db `
		-d `
		-p 3306:3306 `
		-e MYSQL_ROOT_PASSWORD=my-secret-pw `
		-v db:/var/lib/mysql `
		mysql
		
docker inspect db #extract ip address

docker run --name web `
		-d `
		-p 8080:80 `
		-e MY_DB_PORT=3306 `
		-e MY_DB_HOST=? `
		-v /my/php/app:/usr/share/nginx/html `
		nginx
</code></pre>
<p>docker-compose.yml file</p>
<pre><code class="language-shell">version: '2'

services:
    teamcity:
        image: sjoerdmulder/teamcity
        ports:
            - 8111:8111
    teamcity-agent:
        image: sjoerdmulder/teamcity-agent
        environment:
            - TEAMCITY_SERVER=http://teamcity:8111
    postgres:
        image: postgres
        environment:
            - POSTGRES_DB=teamcity
            - POSTGRES_PASSWORD=teamcity
</code></pre>
<pre><code class="language-shell">    docker-compose up
    docker network ls 
    docker network inspect eb1_container_id
    docker network inspect bridge
    docker exec -it teamcity_postgres_1 bash
    docker-compose exec postgres bash 
    docker run --name alpine --rm --net teamcity_default -it alpine sh
    docker-compose exec teamcity bash
    docker-compose start teamcity-agent
    docker-compose ps
    docker-compose exec postgres psql -U postgres 
    docker-compose stop
    docker-compose rm
    docker-compose down
</code></pre>
<pre><code class="language-shell">version: ‘2’
services:
    db:
        image: mysql
        ports:
        -3306:3306
        environment:
        -MYSQL_ROOT_PASSWORD=my-secret-pw
        volumes:
        -db:/var/lib/mysql
    web:
        image: nginx
        ports:
        -8080:80
        environment:
        -MY_DB_PORT=3306
        -MY_DB_HOST=db
        volumes:
        -/my/php/app:/usr/share/nginx/html

</code></pre>
<p><a href="https://github.com/friism/MusicStore">github://friism/MusicStore</a></p>
<pre><code class="language-shell">version: '3'
services:
  db:
    image: microsoft/mssql-server-windows-developer
    environment:
      sa_password: &quot;Password1&quot;
      ACCEPT_EULA: &quot;Y&quot;
    ports:
      - &quot;1433:1433&quot; # REMARK: This is currently required, needs investigation
    healthcheck:
      test: [ &quot;CMD&quot;, &quot;sqlcmd&quot;, &quot;-U&quot;, &quot;sa&quot;, &quot;-P&quot;, &quot;Password1&quot;, &quot;-Q&quot;, &quot;select 1&quot; ]
      interval: 1s
      retries: 30

  web:
    build:
      context: .
      dockerfile: Dockerfile.windows
    environment:
      - &quot;Data:DefaultConnection:ConnectionString=Server=db,1433;Database=MusicStore;User Id=sa;Password=Password1;MultipleActiveResultSets=True&quot;
    depends_on:
      - db
    ports:
      - &quot;5000:5000&quot;

</code></pre>
<h1 id="installing-sql-server-on-docker-desktop">installing sql server on docker desktop</h1>
<p>links: <a href="https://docs.microsoft.com/en-us/sql/linux/tutorial-restore-backup-in-sql-server-container?view=sql-server-ver15">https://docs.microsoft.com/en-us/sql/linux/tutorial-restore-backup-in-sql-server-container?view=sql-server-ver15</a></p>
<p><strong>Restore Database from bak file on host</strong></p>
<pre><code class="language-shell">docker cp E:\Tutorial\AdventureWorksLT.bak sql1:/var/opt/mssql/backup
</code></pre>
<pre><code class="language-shell">docker exec -it sql1 /opt/mssql-tools/bin/sqlcmd -S localhost  -U SA -P &quot;&lt;YourStrong!Passw0rd&gt;&quot;  -Q &quot;RESTORE FILELISTONLY FROM DISK = '/var/opt/mssql/backup/AdventureWorksLT.bak'&quot;
</code></pre>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'shadowkiller69x'; // required: replace example with your forum shortname
    var disqus_identifier = 'docker';
    var disqus_title = 'Docker for Windows';
    var disqus_url = 'http://host.com/blog/posts/docker';

    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://shadowkiller69x.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © 2022
                        <br />
                            <a href="/blog/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/blog/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                       
                    </p>
                </div>
        </div>
</div>

                </footer> 

                <script src="/blog/assets/js/jquery.min.js"></script>
                <script src="/blog/assets/js/bootstrap.min.js"></script>     
                <script src="/blog/assets/js/highlight.pack.js"></script>   
                <script src="/blog/assets/js/clean-blog.js"></script>
                <script src="/blog/assets/js/d3.v3.min.js"></script>
                <script src="/blog/assets/js/trianglify.min.js"></script>
                <script src="/blog/assets/js/Please-compressed.js"></script>
                <script src="/blog/assets/js/background-check.min.js"></script>

                <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                <!--[if lt IE 9]>
                        <script src="/blog/assets/js/html5shiv.js"></script>
                        <script src="/blog/assets/js/respond.min.js"></script>
                <![endif]-->
                
                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

