
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>ashcoder.io - jquery-ajax</title>
        <meta name="description" content="Welcome!" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="ashcoder.io" href="/blog/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="ashcoder.io" href="/blog/feed.atom" />
        <link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">

        <link href="/blog/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/blog/assets/css/highlight.css" rel="stylesheet">
        <link href="/blog/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/blog/assets/css/master.css" rel="stylesheet" />
        <link href="/blog/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/blog/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="ashcoder.io" />
        <meta name="msapplication-tooltip" content="ashcoder.io" />
        <meta name="msapplication-starturl" content="/blog/" />

        <meta property="og:title" content="ashcoder.io - jquery-ajax" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://host.com/blog/posts/jqueryajax" />
        <!-- TODO: More social graph meta tags -->

        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/blog/">ashcoder.io</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/blog/posts">Archive</a></li>
        <li><a href="/blog/tags">Tags</a></li>
        <li><a href="/blog/about">About Me</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>jquery-ajax</h1>
    <div class="meta">        
Published on Monday, March 28, 2022<br>    </div>
        <div class="tags">
                    <a role="button" href="/blog/tags/ajax" class="btn btn-default btn-xs">ajax</a>
                    <a role="button" href="/blog/tags/jquery" class="btn btn-default btn-xs">jquery</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>XMLHttpRequest object</p>
<hr />
<p>the most fundamental building block of Ajax is the XMLHttpRequest object</p>
<pre><code>    function get() {
        let req = new XMLHttpRequest();
        req.onreadystatechange = function () {
        console.log(this);
        };
        req.open(&quot;GET&quot;, URL);
        req.send();
    }
</code></pre>
<p>post request</p>
<pre><code class="language-shell">function postRequest() {
        let postdata = getFromInput();
        let req = new XMLHttpRequest();
        // When the entire request fails it is probably a network error
        req.onerror = function () {
          
        };

        req.onreadystatechange = function () {
            if (this.readyState === XMLHttpRequest.DONE &amp;&amp; this.status === 201) {
              var data = JSON.parse(this.response);
            }
            else if (this.readyState === XMLHttpRequest.DONE &amp;&amp; this.status &gt;= 400) {
            // Check for error
            
            }
        };

        req.open(&quot;POST&quot;, URL);
        req.setRequestHeader(&quot;Content-Type&quot;,&quot;application/json&quot;);
        req.send(JSON.stringify(postdata));
      }
</code></pre>
<p>Fetch API</p>
<hr />
<p>The very basic fetch api looks like below</p>
<pre><code>    functionget(){
        fetch(URL)
        .then(response=&gt;response.json())
        .then(data=&gt;console.log(data));
    }
</code></pre>
<p>post using fetch api</p>
<pre><code>    function insertData() {
        
        let postdata = getFromInput();

        let options = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(postdata)
        };

        fetch(URL, options)
          .then(response =&gt; response.json();)
          .then(data =&gt; {
            console.log(data)
          })
          .catch(error =&gt; console.log(error));
      }
</code></pre>
<p>Jquery Ajax with ASP.net core</p>
<hr />
<p><strong>contentType</strong>
contentType (default: 'application/x-www-form-urlencoded; charset=UTF-8')</p>
<p>Type: String</p>
<p>When sending data to the server, use this content type. Default is &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;, which is fine for most cases. If you explicitly pass in a content-type to $.ajax(), then it'll always be sent to the server (even if no data is sent). If no charset is specified, data will be transmitted to the server using the server's default charset; you must decode this appropriately on the server side.</p>
<p><strong>data type</strong></p>
<p>dataType (default: Intelligent Guess (xml, json, script, or html))</p>
<p>Type: String</p>
<p>The type of data that you're expecting back from the server. If none is specified, jQuery will try to infer it based on the MIME type of the response (an XML MIME type will yield XML, in 1.4 JSON will yield a JavaScript object, in 1.4 script will execute the script, and anything else will be returned as a string).</p>
<p><strong>Ajax Get Example</strong></p>
<pre><code>$.ajax({
        url: URL,
        dataType: 'JSON',
        contentType: &quot;application/json&quot;,
        type: &quot;GET&quot;,
        data: { name: name },
        success: function (response) {
            console.log(response);
        },
        error: function (ex) {
            console.error(ex);
        }
    });
</code></pre>
<p><strong>asp.net backend</strong></p>
<pre><code>  [HttpGet]
  public IActionResult GetInfoByName(string name)
  {
    try
    {
      .....
      return Json(new { data = response, result = CommonAjaxResponse(MessageType.success, &quot;&quot;, ResponseCode.success) });
    }
    catch (Exception ex) when (ex is Exception)
    {
      ....
      return Json(new { result = CommonAjaxResponse(MessageType.error, ex.Message, ResponseCode.error) });
    }
  }
</code></pre>
<h1 id="ajax-post-example">Ajax Post Example</h1>
<pre><code>$.ajax({
        type: &quot;POST&quot;,
        url: url,
        data: JSON.stringify(obj),
        dataType: 'JSON',
        contentType: &quot;application/json&quot;,
        success: function (response) {
            console.log(response)
        },
        error: function (request, status, error) {
            console.error(error);
        }
      });
</code></pre>
<pre><code>  [HttpPost]
      
  public JsonResult SaveData([FromBody] DataModelDto data)
  {
      try
      {
        ................
        ................
        return Json(new { result = CommonAjaxResponse(result.MessageType, result.Message, result.ResponseCode), data = dataItem });
      }
      catch (Exception exception)
      {
        return Json(new { result = CommonAjaxResponse(MessageType.error, exception.Message, ResponseCode.error) });
      }
  }
</code></pre>
<pre><code>var obj = $(&quot;form#formid&quot;).serialize();
$.ajax({
        url: '/Controller/Update',
        type: 'post',
        dataType: 'json',
        data: obj,
        success: function (response) {
          console.log(response);
        },
        error: function (xhr) {
          console.error(xhr)
        }
    });
</code></pre>
<pre><code>[HttpPost]
public IActionResult Update(UpdateModelDto model)
{
    try
    {
      Response result = ......................
      ........................................
      return Json(new { result = CommonAjaxResponse(result.MessageType, result.Message, result.ResponseCode) });
    }
    catch (Exception ex) when (ex is { } exception)
    {
      return Json(new { result = CommonAjaxResponse(MessageType.error, ex.Message, ResponseCode.error) });
    }
}
</code></pre>
<pre><code>var obj = {};
obj.FromDate = $(&quot;#txtFromDate&quot;).val();
obj.ToDate = $(&quot;#txtToDate&quot;).val();
$.ajax({
        type: &quot;POST&quot;,
        url: &quot;/Controller_Name/LoadData&quot;,
        data: obj,
        dataType: 'JSON',
        contentType: &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;,
        success: function (response) {
            LoadAssignStatSuccessData(response.data);
        },
        error: function (xhr) {
            ShowMessage('error', xhr.innerText);
        }
  });
</code></pre>
<pre><code>[HttpPost]
[CustomAuthorize(IsCheck = false)]
public IActionResult LoadData(DataViewModel model)
{
  try
  {
    DateTime fromDate = Convert.ToDateTime(model.FromDate);
    DateTime toDate = Convert.ToDateTime(model.ToDate);
    .................
    return Json(new { data = StatusEntityList, result = CommonAjaxResponse(MessageType.success, &quot;&quot;, ResponseCode.success) });
  }

  catch (Exception exception) when (exception is Exception ex)
  {
    return Json(new { result = CommonAjaxResponse(MessageType.error, ex.Message, ResponseCode.error) });
  }
}
</code></pre>
<pre><code>$('#vendorTable').on('click', '.btnEditDetails', function () {
        $('#btnSaveVendor').show();
        $('.modal-body').load(`/Vendor/GetEditVendorDetails?id=${$(this).data('id')}`, function (response, status, xhr) {
            if (status == &quot;error&quot;) {
                var msg = &quot;Sorry but there was an error: &quot;;
                ShowMessage(&quot;error&quot;, msg);
            }
            else {
                $('#modalVendor').modal('show');
            }
        });
        
    });
</code></pre>
<pre><code>public PartialViewResult GetEditVendorDetails(int id)
{
    if (id &lt;= 0)
    {
        return PartialView(&quot;_error&quot;);
    }
    try
    {
        var vendor = _vendorService.GetVendorById(id);
        if (vendor == null || vendor.Id == 0)
        {
            return PartialView(&quot;_error&quot;);
        }
        return PartialView(&quot;_EditVendorPartials&quot;, vendor);
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, &quot;{ProcessName} {Channel} Message: &quot; + ex.Message, ControllerContext.ActionDescriptor.ControllerName, &quot;web&quot;);
        return PartialView(&quot;_error&quot;);
    }
}
</code></pre>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'shadowkiller69x'; // required: replace example with your forum shortname
    var disqus_identifier = 'jqueryajax';
    var disqus_title = 'jquery-ajax';
    var disqus_url = 'http://host.com/blog/posts/jqueryajax';

    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://shadowkiller69x.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © 2022
                        <br />
                            <a href="/blog/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/blog/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                       
                    </p>
                </div>
        </div>
</div>

                </footer> 

                <script src="/blog/assets/js/jquery.min.js"></script>
                <script src="/blog/assets/js/bootstrap.min.js"></script>     
                <script src="/blog/assets/js/highlight.pack.js"></script>   
                <script src="/blog/assets/js/clean-blog.js"></script>
                <script src="/blog/assets/js/d3.v3.min.js"></script>
                <script src="/blog/assets/js/trianglify.min.js"></script>
                <script src="/blog/assets/js/Please-compressed.js"></script>
                <script src="/blog/assets/js/background-check.min.js"></script>

                <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                <!--[if lt IE 9]>
                        <script src="/blog/assets/js/html5shiv.js"></script>
                        <script src="/blog/assets/js/respond.min.js"></script>
                <![endif]-->
                
                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

